!function(t){function n(){var n=t(this);n.prev()[0].value=n.html()}function o(){t(this).next().html(this.value)}t.fn.editor=function(e){var c=t.extend({},t.fn.editor.defaults,e);return this.addClass(c.class_editor).after(c.tag).css("display","none").keyup(o).each(o).next().attr("contenteditable",!0).addClass(c.class_editor).focusout(n).keyup(n).change(n),0!=c.controls&&this.before(c.tag).prev().addClass(c.class_controls).each(function(){for(i in c.controls){var n=t.extend({render:t.fn.editor.renderControl,config:t.fn.editor.configControl,action:t.fn.editor.configAction},c.controls[i]);n.config(t(this).append(n.render()).children(":last-child"))}}),this},t.fn.editor.renderControl=function(){return'<span class="button-tootlbar '+this.command+'"></span>'},t.fn.editor.configControl=function(t){var n=this;t.click(function(){n.action()})},t.fn.editor.configAction=function(){document.execCommand(this.command,null,null)},t.fn.editor.defaults={controls:[{text:"B",command:"bold"},{text:"I",command:"italic"},{text:"U",command:"underline"},{text:">",command:"undo"},{text:"<",command:"redo"},{text:"L",command:"justifyLeft"},{text:"C",command:"justifyCenter"},{text:"R",command:"justifyRight"},{text:"F",command:"justifyFull"},{text:"img",command:"insertImage",action:function(){document.execCommand(this.command,null,prompt("Image Url:"))}},{text:"enl",command:"createLink",action:function(){document.execCommand(this.command,null,prompt("Link Url:"))}},{text:"print",command:"printDocument",config:function(n){n.click(function(){var n=t(this).parent().next().next().html(),o=window.open("","_blank","width=450,height=470,left=400,top=100,menubar=yes,toolbar=no,location=no,scrollbars=yes");o.document.open(),o.document.write('<!doctype html><html><head><title>Print</title></head><body onload="print();">'+n+"</body></html>"),o.document.close()})}},{text:"A",command:"selectAll"},{text:"</>",command:"htmlEditor",config:function(n){n.click(function(){var n=t(this).parent().next();"none"==n.css("display")?n.css("display","block").next().css("display","none"):n.css("display","none").next().css("display","block")})}}],class_controls:"controls",class_editor:"editor",tag:"<div/>"}}(jQuery);